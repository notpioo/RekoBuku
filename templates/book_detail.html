{% extends "base.html" %}

{% block title %}{{ book.title }} - RekoBuku{% endblock %}

{% block content %}
<div class="container py-4">
    <div class="row">
        <div class="col-md-4 text-center">
            <img src="{{ book.cover_image }}" class="img-fluid book-detail-img" alt="{{ book.title }}">
        </div>
        <div class="col-md-8 book-detail-content">
            <nav aria-label="breadcrumb" class="mb-3">
                <ol class="breadcrumb">
                    <li class="breadcrumb-item"><a href="{{ url_for('home') }}">Home</a></li>
                    <li class="breadcrumb-item active">{{ book.title }}</li>
                </ol>
            </nav>
            
            <h1 class="display-5 fw-bold mb-3">{{ book.title }}</h1>
            <p class="lead text-muted mb-3">oleh <strong>{{ book.author }}</strong></p>
            
            <div class="genres mb-4">
                {% for genre in book.genre %}
                <span class="badge bg-primary me-2 fs-6">{{ genre }}</span>
                {% endfor %}
            </div>
            
            <div class="book-description mb-4">
                <h5>Deskripsi</h5>
                <p class="text-muted" style="white-space: pre-wrap; text-align: justify;">{{ book.description }}</p>
            </div>
            
            <div class="book-actions">
                {% if current_user.is_authenticated %}
                <button onclick="toggleFavorite('{{ book.id }}')" class="btn btn-lg book-favorite-btn me-3 {{ 'btn-danger' if is_favorite else 'btn-outline-danger' }}" data-book-id="{{ book.id }}">
                    <i class="{% if is_favorite %}fas{% else %}far{% endif %} fa-heart me-2"></i>
                    <span class="favorite-text">{{ 'Hapus dari Favorit' if is_favorite else 'Tambahkan ke Favorit' }}</span>
                </button>
                {% else %}
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    <a href="{{ url_for('login') }}" class="alert-link">Masuk</a> untuk menambahkan buku ini ke favorit Anda.
                </div>
                {% endif %}
                
                <a href="{{ url_for('jelajah') if current_user.is_authenticated else url_for('home') }}" class="btn btn-outline-primary btn-lg">
                    <i class="fas fa-arrow-left me-2"></i>Kembali
                </a>
            </div>
        </div>
    </div>
    
    <!-- Related Books Section -->
    {% if current_user.is_authenticated %}
    <div class="row mt-5">
        <div class="col-12">
            <h3>Buku Lainnya yang Mungkin Anda Suka</h3>
            <p class="text-muted">Berdasarkan genre yang sama</p>
            <!-- This could be implemented later with related books logic -->
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}